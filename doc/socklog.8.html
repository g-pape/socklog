


<HTML>
<HEAD>
<TITLE>socklog(8) manual page</TITLE>
</HEAD>
<BODY bgcolor=white>
<a href="http://smarden.org/pape/">G. Pape</a><br><A HREF="index.html">socklog</A><hr><P>

<H2><A NAME="sect0">Name</A></H2>
socklog - small and secure syslogd replacement for use with runit 
<H2><A NAME="sect1">Synopsis</A></H2>
<B>socklog</B>
[ unix ] [ <I>path</I> ] <BR>
<B>socklog</B> inet [ <I>ip</I> ] [ <I>port</I> ] <BR>
<B>socklog</B> ucspi [ <I>args</I> ] 
<H2><A NAME="sect2">Description</A></H2>
<B>socklog</B> is run under runit's <B><I>runsv</B>(8)</I>,
writing syslog messages it receives from unix domain socket <I>path</I> or an
inet udp socket <I>ip:<I>port</I></I> through a pipe provided by <B><I>runsv</B>(8)</I> to a <B><I>svlogd</B>(8)</I>
process. <P>
<B>socklog</B> can be run as an ucspi application to listen to an unix
domain stream socket and for more flexible distributed logging. <P>
If the environment
variables $UID and/or $GID are present, <B>socklog</B> drops permissions to those
ids after creating and binding the socket (not in <I>ucspi</I> mode). <P>
<B>socklog</B> converts
syslog facility and priority information to names (<I>facility</I>.<I>priority</I>:) as
found in <I>/usr/include/syslog.h</I> at compile time if present. <P>
On solaris <B>socklog</B>
also accepts <I>sun_stream</I> as first argument. Please see the web page for details.

<H2><A NAME="sect3">Unix Socket</A></H2>
<B>socklog</B> [ unix ] [ <I>path</I> ] <P>
Starting <B>socklog</B> with the 1st argument
<I>unix</I>, <B>socklog</B> will listen to the unix domain socket <I>path</I>. If <I>path</I> is omitted,
the default <I>/dev/log</I> is used. <P>
The 1st argument may be omitted, default is
<I>unix</I>. 
<H2><A NAME="sect4">Inet Socket</A></H2>
<B>socklog</B> inet [ <I>ip</I> ] [ <I>port</I> ] <P>
Starting <B>socklog</B> with the
1st argument <I>inet</I>, <B>socklog</B> will listen to the inet udp socket <I>ip:<I>port</I>.</I> <P>
If
<I>ip</I> starts with 0, <B>socklog</B> will bind to all local interfaces. <P>
If <I>port</I> is
less or equal 1024, <B>socklog</B> must be run by root. <P>
<I>port</I> may be omitted, default
is 514. <I>ip</I> may be omitted, default is 0. <P>
<B>socklog</B> prepends <I>a.b.c.d:</I> to each syslog
message it receives, where <I>a.b.c.d</I> is the ip address of the connecting system.

<H2><A NAME="sect5">Ucspi Mode</A></H2>
<B>socklog</B> ucspi [ <I>args</I> ] <P>
Starting <B>socklog</B> with the 1st argument
<I>ucspi</I>, <B>socklog</B> will run as an ucspi application. Normally <B>socklog</B> will only
be started in <I>ucspi</I> mode by an ucspi server tool, such as <B><I>tcpsvd</B>(8)</I>, <B><I>tcpserver</B>(1)</I>
or <B>unixserver</B>. <P>
For each <I>arg</I>, <B>socklog</B> will prepend $<I>arg</I>: to each syslog message,
if the environment variable $<I>arg</I> is present (maximum is 8). <P>
 
<H2><A NAME="sect6">See Also</A></H2>
<I>runsvdir(8)</I>,
<I>runsv(8)</I>, <I>svlogd(8)</I>, <I>tryto(1)</I>, <I>uncat(1)</I>, <I>tcpsvd(8)</I>, <I>nc(1)</I> <P>
 <I>http://smarden.org/socklog/</I><BR>
 
<H2><A NAME="sect7">Author</A></H2>
Gerrit Pape &lt;pape@smarden.org&gt; <P>

<HR><P>
<A NAME="toc"><B>Table of Contents</B></A><P>
<UL>
<LI><A NAME="toc0" HREF="#sect0">Name</A></LI>
<LI><A NAME="toc1" HREF="#sect1">Synopsis</A></LI>
<LI><A NAME="toc2" HREF="#sect2">Description</A></LI>
<LI><A NAME="toc3" HREF="#sect3">Unix Socket</A></LI>
<LI><A NAME="toc4" HREF="#sect4">Inet Socket</A></LI>
<LI><A NAME="toc5" HREF="#sect5">Ucspi Mode</A></LI>
<LI><A NAME="toc6" HREF="#sect6">See Also</A></LI>
<LI><A NAME="toc7" HREF="#sect7">Author</A></LI>
</UL>
</BODY></HTML>
