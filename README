socklog - minimal replacement for syslogd

-------------------------------------------------------------------------------
socklog in cooperation with djb's daemontools is a minimal replacement for
syslogd. There are three main features, syslogd provides:

  * receiving syslog messages from a unix domain socket (/dev/log) and writing
    them to various files on disk depending on facility and priority.
  * receiving syslog messages from an udp socket (0.0.0.0:514) and writing them
    to various files on disk depending on facility and priority.
  * writing received syslog messages to an udp socket (x.x.x.x:514)

socklog refuses the latter but provides the first two features with the help of
daemontools` svscan, supervise and multilog.

socklog is small, secure, reliable and not feature-overloaded.
-------------------------------------------------------------------------------
socklog is run under daemontools' supervise, writing syslog messages it
receives from an unix domain socket path (/dev/log) or an inet udp socket ip:
port (0.0.0.0:514) through a pipe provided by svscan to a multilog process.

socklog can be run as an ucspi application to listen to an unix domain stream
socket and for centralized or more flexible distributed logging.

If socklog listens to an udp socket, it prepends ip: (a.b.c.d: ) to each syslog
message it receives, where a.b.c.d is the ip address of the connecting system.

If the environment variables $UID and/or $GID are present, socklog will drop
permissions to those ids after creating and binding to the socket (not in ucspi
mode).

socklog converts syslog facility and priority information to names
(facility.priority) as found in /usr/include/syslog.h at compile time if
present, you can use this for multilog's line selecting by pattern.
-------------------------------------------------------------------------------
A proper run file for supervise is:
  #!/bin/sh
  exec 2>&1
  exec envuidgid nobody socklog unix /dev/log
    
See envuidgid (# man envuidgid) and socklog (# man socklog).

A proper log/run file for supervise is:
  #!/bin/sh
  LOGDIR=/var/log/socklog
  exec setuidgid log multilog ${LOGDIR}/main \
    -* +kern.* ${LOGDIR}/kern \
    -* +user.* ${LOGDIR}/user \
    -* +mail.* ${LOGDIR}/mail \
    -* +daemon.* ${LOGDIR}/daemon \
    -* +auth.* +authpriv.* ${LOGDIR}/auth \
    -* +syslog.* ${LOGDIR}/syslog \
    -* +news.* ${LOGDIR}/news \
    -* +cron.* ${LOGDIR}/cron \
    -* +ftp.* ${LOGDIR}/ftp \
    -* +local*.* ${LOGDIR}/local \
    -* +*.debug* ${LOGDIR}/debug
    
See setuidgid (# man setuidgid) and multilog (# man multilog).
-------------------------------------------------------------------------------
you can download the package via ftp. socklog is also available as Debian GNU/
Linux package, just add
  deb ftp://ftp.innominate.org/pub/pape/Debian potato innominate
  deb-src ftp://ftp.innominate.org/pub/pape/Debian potato innominate
    
to /etc/apt/sources.list and
  # apt-get update
    
Then install the package socklog as usual with apt, dpkg or dselect.
-------------------------------------------------------------------------------
See INSTALL on how to install socklog and Configuration for setting up socklog
services.
-------------------------------------------------------------------------------
See http://innominate.org/~pape/socklog/ for recent informations.
-------------------------------------------------------------------------------

G. Pape
$Id$
